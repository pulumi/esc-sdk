# Contributing to ESC SDK

## Building from source

### Prerequisites

* [OpenAPI Generator](https://openapi-generator.tech/docs/installation/)
* Java

### Building

ESC SDK uses OpenAPI Generator to auto-generate the raw API clients from the `swagger.yaml` definition.

To build the autogenerated API clients, run:

```shell
make generate_sdks
```

Additionally, ESC SDK provides wrapper clients for TypeScript/JavaScript, Python, Go, and C#. To build these packages, run:

```shell
make build_typescript
make build_python
make build_go
make build_csharp
```

The C# SDK requires the .NET 6.0 SDK or later.

### Running tests

First, make sure to set the following environment variables:

```shell
PULUMI_ACCESS_TOKEN=<token>
PULUMI_ORG=<org>

# Optional - defaults to https://api.pulumi.com/api/esc.
PULUMI_BACKEND_URL=<base_url>
```

Now you can run the tests for the different sdks:

```shell
make test_typescript
make test_python
make test_go
make test_csharp                # Unit tests only
make test_csharp_integration    # E2E tests (requires env vars above)
```

## Submitting a Pull Request

For contributors we use the [standard fork based workflow](https://gist.github.com/Chaser324/ce0505fbed06b947d962): Fork this repository, create a topic branch, and when ready, open a pull request from your fork.

## Creating a Release

This section is for Pulumi employees only.

To release a new version of the provider, follow steps below:
- Create a release commit by updating `.version` and running `make generate_sdks` ([example](https://github.com/pulumi/esc-sdk/pull/61))
- Run release commands, replacing `X.XX.XX` with your new version.
     ```
     git checkout main
     git pull
     git tag sdk/vX.XX.XX
     git tag vX.XX.XX
     git push origin vX.XX.XX
     git push origin sdk/vX.XX.XX
     ```
- Github Actions will automatically build, test and then publish the new release to all the various package managers
